<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AgriVision ‚Äî Crop & Disease Detector</title>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700;800&display=swap" rel="stylesheet">
<style>
:root { --bg1:#f4fff7; --bg2:#e6f6e7; --accent:#2f7e12; --muted:#6b7a66; --card:#fff; }
body{ margin:0; font-family:Inter,sans-serif; background:linear-gradient(180deg,var(--bg1),var(--bg2)); display:flex; justify-content:center; align-items:center; min-height:100vh; padding:16px;}
.app{ background:var(--card); border-radius:16px; box-shadow:0 12px 28px rgba(0,0,0,0.1); padding:24px; max-width:900px; width:100%; display:grid; grid-template-columns:1fr 300px; gap:20px;}
@media(max-width:850px){.app{grid-template-columns:1fr;} }
h1{margin:0;color:var(--accent);}
.controls button, .controls select{margin:6px;padding:10px 14px;font-weight:600;border-radius:10px;border:none;cursor:pointer;}
.btn-primary{background:var(--accent);color:#fff;}
.media{background:var(--card);border-radius:12px;padding:10px;display:flex;justify-content:center;align-items:center;min-height:240px;box-shadow:0 8px 20px rgba(0,0,0,0.05);}
video,img{width:100%;height:auto;border-radius:8px;max-height:400px;object-fit:contain;}
.right{display:flex;flex-direction:column;gap:12px;}
.result-card{background:var(--card);padding:14px;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,0.05);}
.prediction{font-size:20px;font-weight:800;color:var(--accent);}
.prob{font-size:14px;color:var(--muted);}
.spinner{width:14px;height:14px;border-radius:50%;border:2px solid rgba(0,0,0,.1);border-top-color:var(--accent);animation:spin 1s linear infinite;display:inline-block;}
@keyframes spin { to{transform:rotate(360deg);} }
.hint { font-size:13px;color:var(--muted); margin-top:8px;}
</style>
</head>
<body>
<div class="app">
<div class="left">
<h1 id="title">AgriVision ‚Äî Crop & Disease Detector</h1>
<div class="controls">
<button id="btn-open">Open Camera</button>
<label class="btn-upload" style="cursor:pointer;">
<span id="uploadText" style="display:inline-block;margin:6px;padding:10px 14px;border-radius:10px;background:#eee;">Upload Image</span>
<input type="file" id="file" accept="image/*" style="display:none;">
</label>
<button id="btn-detect" class="btn-primary" disabled>Detect</button>
<select id="langSelect">
<option value="en">English</option>
<option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
<option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
<option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
<option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
<option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
<option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</option>
<option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
<option value="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</option>
</select>
</div>
<div class="media" id="media-area">
<div id="placeholder" style="text-align:center;color:var(--muted);padding:8px;">
Preview<br>Open camera or upload an image
</div>
<video id="webcam" autoplay playsinline style="display:none;"></video>
<img id="imgPreview" style="display:none;" alt="preview image">
</div>
<div style="margin-top:12px;" id="model-status">
<span class="spinner" style="margin-right:8px;"></span>
Loading Teachable Machine model...
</div>
<div class="hint" id="hintText">Use camera or upload image to detect crop health.</div>
</div>
<div class="right">
<div class="result-card">
<div id="predictionLabel">Prediction</div>
<div class="prediction" id="predictionText">‚Äî</div>
<div class="prob" id="predictionProb">‚Äî</div>
<div style="margin-top:10px;">
<button id="btn-more">More Info</button>
<button id="btn-buy" class="btn-primary">Buy Products</button>
</div>
<div style="margin-top:10px;font-size:13px;color:var(--muted)" id="statusText">Status: Waiting for model</div>
</div>
</div>
</div>
<canvas id="hiddenCanvas" style="display:none;"></canvas>

<script>
// üåê All Language Translations (9 Indian Languages)
const texts = {
en:{title:"AgriVision ‚Äî Crop & Disease Detector",upload:"Upload Image",open:"Open Camera",detect:"Detect",placeholder:"Preview\nOpen camera or upload an image",hint:"Use camera or upload image to detect crop health.",prediction:"Prediction",more:"More Info",buy:"Buy Products",statusWait:"Status: Waiting for model",statusCamera:"Status: Camera open",statusImage:"Status: Image loaded",statusDetect:"Status: Detection complete ‚úÖ"},
hi:{title:"‡§è‡§ó‡•ç‡§∞‡•Ä‡§µ‡§ø‡§ú‡§® ‚Äî ‡§´‡§∏‡§≤ ‡§è‡§µ‡§Ç ‡§∞‡•ã‡§ó ‡§™‡§π‡§ö‡§æ‡§®",upload:"‡§õ‡§µ‡§ø ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç",open:"‡§ï‡•à‡§Æ‡§∞‡§æ ‡§ñ‡•ã‡§≤‡•á‡§Ç",detect:"‡§™‡§§‡§æ ‡§ï‡§∞‡•á‡§Ç",placeholder:"‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§µ‡§≤‡•ã‡§ï‡§®\n‡§ï‡•à‡§Æ‡§∞‡§æ ‡§ñ‡•ã‡§≤‡•á‡§Ç ‡§Ø‡§æ ‡§õ‡§µ‡§ø ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç",hint:"‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ï‡§æ ‡§™‡§§‡§æ ‡§≤‡§ó‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•à‡§Æ‡§∞‡§æ ‡§Ø‡§æ ‡§õ‡§µ‡§ø ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç‡•§",prediction:"‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®",more:"‡§Ö‡§ß‡§ø‡§ï ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä",buy:"‡§â‡§§‡•ç‡§™‡§æ‡§¶ ‡§ñ‡§∞‡•Ä‡§¶‡•á‡§Ç",statusWait:"‡§∏‡•ç‡§•‡§ø‡§§‡§ø: ‡§Æ‡•â‡§°‡§≤ ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ",statusCamera:"‡§∏‡•ç‡§•‡§ø‡§§‡§ø: ‡§ï‡•à‡§Æ‡§∞‡§æ ‡§ñ‡•Å‡§≤‡§æ",statusImage:"‡§∏‡•ç‡§•‡§ø‡§§‡§ø: ‡§õ‡§µ‡§ø ‡§≤‡•ã‡§° ‡§ï‡•Ä ‡§ó‡§à",statusDetect:"‡§∏‡•ç‡§•‡§ø‡§§‡§ø: ‡§™‡§π‡§ö‡§æ‡§® ‡§™‡•Ç‡§∞‡•Ä ‚úÖ"},
bn:{title:"AgriVision ‚Äî ‡¶´‡¶∏‡¶≤ ‡¶ì ‡¶∞‡ßã‡¶ó ‡¶∂‡¶®‡¶æ‡¶ï‡ßç‡¶§‡¶ï‡¶∞‡¶£",upload:"‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®",open:"‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®",detect:"‡¶∂‡¶®‡¶æ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®",placeholder:"‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â\n‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶® ‡¶¨‡¶æ ‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®",hint:"‡¶´‡¶∏‡¶≤‡ßá‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶ú‡¶æ‡¶®‡¶§‡ßá ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶¨‡¶æ ‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®‡•§",prediction:"‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶≠‡¶æ‡¶∏",more:"‡¶Ü‡¶∞‡¶ì ‡¶§‡¶•‡ßç‡¶Ø",buy:"‡¶™‡¶£‡ßç‡¶Ø ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®",statusWait:"‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ: ‡¶Æ‡¶°‡ßá‡¶≤ ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶Æ‡¶æ‡¶£",statusCamera:"‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ: ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶ñ‡ßã‡¶≤‡¶æ",statusImage:"‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ: ‡¶õ‡¶¨‡¶ø ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá",statusDetect:"‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ: ‡¶∂‡¶®‡¶æ‡¶ï‡ßç‡¶§ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‚úÖ"},
ta:{title:"AgriVision ‚Äî ‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ®‡Øã‡ÆØ‡Øç ‡Æï‡Æ£‡Øç‡Æü‡Æ±‡Æø‡Æ§‡Æ≤‡Øç",upload:"‡Æ™‡Æü‡Æ§‡Øç‡Æ§‡Øà ‡Æ™‡Æ§‡Æø‡Æµ‡Øá‡Æ±‡Øç‡Æ±‡ØÅ‡Æï",open:"‡Æï‡Øá‡ÆÆ‡Æ∞‡Ææ ‡Æ§‡Æø‡Æ±",detect:"‡Æï‡Æ£‡Øç‡Æü‡Æ±‡Æø‡ÆØ",placeholder:"‡ÆÆ‡ØÅ‡Æ©‡Øç‡Æ§‡Øã‡Æ±‡Øç‡Æ±‡ÆÆ‡Øç\n‡Æï‡Øá‡ÆÆ‡Æ∞‡Ææ ‡Æ§‡Æø‡Æ±‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ™‡Æü‡ÆÆ‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡Øá‡Æ±‡Øç‡Æ±‡Æµ‡ØÅ‡ÆÆ‡Øç",hint:"‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç ‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Øà ‡ÆÖ‡Æ±‡Æø‡ÆØ ‡Æï‡Øá‡ÆÆ‡Æ∞‡Ææ ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ™‡Æü‡Æ§‡Øç‡Æ§‡Øà‡Æ™‡Øç ‡Æ™‡ÆØ‡Æ©‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æµ‡ØÅ‡ÆÆ‡Øç.",prediction:"‡ÆÆ‡ØÅ‡Æ©‡Øç‡Æ©‡Æ±‡Æø‡Æµ‡Æø‡Æ™‡Øç‡Æ™‡ØÅ",more:"‡ÆÆ‡Øá‡Æ≤‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Æï‡Æµ‡Æ≤‡Øç",buy:"‡Æ§‡ÆØ‡Ææ‡Æ∞‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç ‡Æµ‡Ææ‡Æô‡Øç‡Æï",statusWait:"‡Æ®‡Æø‡Æ≤‡Øà: ‡ÆÆ‡Ææ‡Æ§‡Æø‡Æ∞‡Æø ‡Æï‡Ææ‡Æ§‡Øç‡Æ§‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ",statusCamera:"‡Æ®‡Æø‡Æ≤‡Øà: ‡Æï‡Øá‡ÆÆ‡Æ∞‡Ææ ‡Æ§‡Æø‡Æ±‡Æ®‡Øç‡Æ§‡Æ§‡ØÅ",statusImage:"‡Æ®‡Æø‡Æ≤‡Øà: ‡Æ™‡Æü‡ÆÆ‡Øç ‡Æè‡Æ±‡Øç‡Æ±‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ",statusDetect:"‡Æ®‡Æø‡Æ≤‡Øà: ‡Æï‡Æ£‡Øç‡Æü‡Æ±‡Æø‡Æ§‡Æ≤‡Øç ‡ÆÆ‡ØÅ‡Æü‡Æø‡Æ®‡Øç‡Æ§‡Æ§‡ØÅ ‚úÖ"},
te:{title:"AgriVision ‚Äî ‡∞™‡∞Ç‡∞ü ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞µ‡±ç‡∞Ø‡∞æ‡∞ß‡∞ø ‡∞ó‡±Å‡∞∞‡±ç‡∞§‡∞ø‡∞Ç‡∞™‡±Å",upload:"‡∞ö‡∞ø‡∞§‡±ç‡∞∞‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞Ö‡∞™‡±ç‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",open:"‡∞ï‡±Ü‡∞Æ‡±Ü‡∞∞‡∞æ ‡∞ì‡∞™‡±Ü‡∞®‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",detect:"‡∞ó‡±Å‡∞∞‡±ç‡∞§‡∞ø‡∞Ç‡∞ö‡±Å",placeholder:"‡∞™‡±ç‡∞∞‡∞ø‡∞µ‡±ç‡∞Ø‡±Ç\n‡∞ï‡±Ü‡∞Æ‡±Ü‡∞∞‡∞æ ‡∞ì‡∞™‡±Ü‡∞®‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø ‡∞≤‡±á‡∞¶‡∞æ ‡∞ö‡∞ø‡∞§‡±ç‡∞∞‡∞Ç ‡∞Ö‡∞™‡±ç‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",hint:"‡∞™‡∞Ç‡∞ü ‡∞Ü‡∞∞‡±ã‡∞ó‡±ç‡∞Ø‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞§‡±Ü‡∞≤‡±Å‡∞∏‡±Å‡∞ï‡±ã‡∞µ‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞ï‡±Ü‡∞Æ‡±Ü‡∞∞‡∞æ ‡∞≤‡±á‡∞¶‡∞æ ‡∞ö‡∞ø‡∞§‡±ç‡∞∞‡∞Ç ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.",prediction:"‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ",more:"‡∞Æ‡∞∞‡∞ø‡∞®‡±ç‡∞®‡∞ø ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç",buy:"‡∞â‡∞§‡±ç‡∞™‡∞§‡±ç‡∞§‡±Å‡∞≤‡±Å ‡∞ï‡±ä‡∞®‡∞Ç‡∞°‡∞ø",statusWait:"‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø: ‡∞Æ‡±ã‡∞°‡∞≤‡±ç ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞µ‡±á‡∞ö‡∞ø ‡∞â‡∞Ç‡∞¶‡∞ø",statusCamera:"‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø: ‡∞ï‡±Ü‡∞Æ‡±Ü‡∞∞‡∞æ ‡∞ì‡∞™‡±Ü‡∞®‡±ç",statusImage:"‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø: ‡∞ö‡∞ø‡∞§‡±ç‡∞∞‡∞Ç ‡∞≤‡±ã‡∞°‡±ç ‡∞Ö‡∞Ø‡±ç‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø",statusDetect:"‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø: ‡∞ó‡±Å‡∞∞‡±ç‡∞§‡∞ø‡∞Ç‡∞™‡±Å ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø ‚úÖ"},
mr:{title:"AgriVision ‚Äî ‡§™‡•Ä‡§ï ‡§Ü‡§£‡§ø ‡§∞‡•ã‡§ó ‡§∂‡•ã‡§ß‡§ï",upload:"‡§™‡•ç‡§∞‡§§‡§ø‡§Æ‡§æ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ",open:"‡§ï‡•Ö‡§Æ‡•á‡§∞‡§æ ‡§â‡§ò‡§°‡§æ",detect:"‡§ì‡§≥‡§ñ‡§æ",placeholder:"‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§µ‡§≤‡•ã‡§ï‡§®\n‡§ï‡•Ö‡§Æ‡•á‡§∞‡§æ ‡§â‡§ò‡§°‡§æ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§Æ‡§æ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ",hint:"‡§™‡•Ä‡§ï‡§æ‡§ö‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡•Ä ‡§ì‡§≥‡§ñ‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§ï‡•Ö‡§Æ‡•á‡§∞‡§æ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§Æ‡§æ ‡§µ‡§æ‡§™‡§∞‡§æ.",prediction:"‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø‡§µ‡§æ‡§£‡•Ä",more:"‡§Ö‡§ß‡§ø‡§ï ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä",buy:"‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®‡•á ‡§ñ‡§∞‡•á‡§¶‡•Ä ‡§ï‡§∞‡§æ",statusWait:"‡§∏‡•ç‡§•‡§ø‡§§‡•Ä: ‡§Æ‡•â‡§°‡•á‡§≤‡§ö‡•Ä ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ",statusCamera:"‡§∏‡•ç‡§•‡§ø‡§§‡•Ä: ‡§ï‡•Ö‡§Æ‡•á‡§∞‡§æ ‡§â‡§ò‡§°‡§≤‡•á‡§≤‡§æ ‡§Ü‡§π‡•á",statusImage:"‡§∏‡•ç‡§•‡§ø‡§§‡•Ä: ‡§™‡•ç‡§∞‡§§‡§ø‡§Æ‡§æ ‡§≤‡•ã‡§° ‡§ù‡§æ‡§≤‡•Ä",statusDetect:"‡§∏‡•ç‡§•‡§ø‡§§‡•Ä: ‡§ì‡§≥‡§ñ ‡§™‡•Ç‡§∞‡•ç‡§£ ‚úÖ"},
gu:{title:"AgriVision ‚Äî ‡™™‡™æ‡™ï ‡™Ö‡™®‡´á ‡™∞‡´ã‡™ó ‡™°‡™ø‡™ü‡´á‡™ï‡´ç‡™ü‡™∞",upload:"‡™õ‡™¨‡´Ä ‡™Ö‡™™‡™≤‡´ã‡™° ‡™ï‡™∞‡´ã",open:"‡™ï‡´á‡™Æ‡´á‡™∞‡™æ ‡™ñ‡´ã‡™≤‡´ã",detect:"‡™ì‡™≥‡™ñ‡´ã",placeholder:"‡™™‡´Ç‡™∞‡´ç‡™µ‡™¶‡™∞‡´ç‡™∂‡™®\n‡™ï‡´á‡™Æ‡´á‡™∞‡™æ ‡™ñ‡´ã‡™≤‡´ã ‡™Ö‡™•‡™µ‡™æ ‡™õ‡™¨‡´Ä ‡™Ö‡™™‡™≤‡´ã‡™° ‡™ï‡™∞‡´ã",hint:"‡™™‡™æ‡™ï‡™®‡´Ä ‡™∏‡´ç‡™•‡™ø‡™§‡™ø ‡™ú‡™æ‡™£‡™µ‡™æ ‡™Æ‡™æ‡™ü‡´á ‡™ï‡´á‡™Æ‡´á‡™∞‡™æ ‡™Ö‡™•‡™µ‡™æ ‡™õ‡™¨‡´Ä‡™®‡´ã ‡™â‡™™‡™Ø‡´ã‡™ó ‡™ï‡™∞‡´ã.",prediction:"‡™Ö‡™®‡´Å‡™Æ‡™æ‡™®",more:"‡™µ‡™ß‡´Å ‡™Æ‡™æ‡™π‡™ø‡™§‡´Ä",buy:"‡™â‡™§‡´ç‡™™‡™æ‡™¶‡™®‡´ã ‡™ñ‡™∞‡´Ä‡™¶‡´ã",statusWait:"‡™∏‡´ç‡™•‡™ø‡™§‡™ø: ‡™Æ‡´ã‡™°‡´á‡™≤‡™®‡´Ä ‡™∞‡™æ‡™π ‡™ú‡´ã‡™µ‡´Ä",statusCamera:"‡™∏‡´ç‡™•‡™ø‡™§‡™ø: ‡™ï‡´á‡™Æ‡´á‡™∞‡™æ ‡™ñ‡´Å‡™≤‡´ç‡™≤‡´ã",statusImage:"‡™∏‡´ç‡™•‡™ø‡™§‡™ø: ‡™õ‡™¨‡´Ä ‡™≤‡´ã‡™° ‡™•‡™à",statusDetect:"‡™∏‡´ç‡™•‡™ø‡™§‡™ø: ‡™ì‡™≥‡™ñ ‡™™‡´Ç‡™∞‡´ç‡™£ ‚úÖ"},
kn:{title:"AgriVision ‚Äî ‡≤¨‡≥Ü‡≤≥‡≥Ü ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∞‡≥ã‡≤ó ‡≤™‡≤§‡≥ç‡≤§‡≥Ü",upload:"‡≤ö‡≤ø‡≤§‡≥ç‡≤∞‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤Ö‡≤™‡≥ç‚Äå‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø",open:"‡≤ï‡≥ç‡≤Ø‡≤æ‡≤Æ‡≥Ü‡≤∞‡≤æ‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤§‡≥Ü‡≤∞‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø",detect:"‡≤π‡≥Ü‡≤ö‡≥ç‡≤ö‡≥Å‡≤Æ‡≤æ‡≤°‡≤ø",placeholder:"‡≤™‡≥Ç‡≤∞‡≥ç‡≤µ‡≤¶‡≥É‡≤∂‡≥ç‡≤Ø\n‡≤ï‡≥ç‡≤Ø‡≤æ‡≤Æ‡≥Ü‡≤∞‡≤æ‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤§‡≥Ü‡≤∞‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤ö‡≤ø‡≤§‡≥ç‡≤∞‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤Ö‡≤™‡≥ç‚Äå‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø",hint:"‡≤¨‡≥Ü‡≤≥‡≥Ü‡≤Ø ‡≤Ü‡≤∞‡≥ã‡≤ó‡≥ç‡≤Ø‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤§‡≤ø‡≤≥‡≤ø‡≤Ø‡≤≤‡≥Å ‡≤ï‡≥ç‡≤Ø‡≤æ‡≤Æ‡≥Ü‡≤∞‡≤æ ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤ö‡≤ø‡≤§‡≥ç‡≤∞‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≤≥‡≤∏‡≤ø.",prediction:"‡≤Ö‡≤®‡≥Å‡≤µ‡≤æ‡≤¶",more:"‡≤π‡≥Ü‡≤ö‡≥ç‡≤ö‡≤ø‡≤® ‡≤Æ‡≤æ‡≤π‡≤ø‡≤§‡≤ø",buy:"‡≤â‡≤§‡≥ç‡≤™‡≤®‡≥ç‡≤®‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤ñ‡≤∞‡≥Ä‡≤¶‡≤ø‡≤∏‡≤ø",statusWait:"‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≤ø: ‡≤Æ‡≤æ‡≤¶‡≤∞‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤ï‡≤æ‡≤Ø‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥Ü",statusCamera:"‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≤ø: ‡≤ï‡≥ç‡≤Ø‡≤æ‡≤Æ‡≥Ü‡≤∞‡≤æ ‡≤§‡≥Ü‡≤∞‡≥Ü‡≤Ø‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü",statusImage:"‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≤ø: ‡≤ö‡≤ø‡≤§‡≥ç‡≤∞ ‡≤≤‡≥ã‡≤°‡≥ç ‡≤Ü‡≤ó‡≤ø‡≤¶‡≥Ü",statusDetect:"‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≤ø: ‡≤™‡≤§‡≥ç‡≤§‡≥Ü ‡≤™‡≥Ç‡≤∞‡≥ç‡≤£‡≤ó‡≥ä‡≤Ç‡≤°‡≤ø‡≤¶‡≥Ü ‚úÖ"},
ml:{title:"AgriVision ‚Äî ‡¥µ‡¥ø‡¥≥‡¥Ø‡µÅ‡¥Ç ‡¥∞‡µã‡¥ó‡¥µ‡µÅ‡¥Ç ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡µΩ",upload:"‡¥ö‡¥ø‡¥§‡µç‡¥∞‡¥Ç ‡¥Ö‡¥™‡µç‚Äå‡¥≤‡µã‡¥°‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï",open:"‡¥ï‡µç‡¥Ø‡¥æ‡¥Æ‡¥± ‡¥§‡µÅ‡¥±‡¥ï‡µç‡¥ï‡µÅ‡¥ï",detect:"‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡µÅ‡¥ï",placeholder:"‡¥™‡µç‡¥∞‡¥ø‡¥µ‡µç‡¥Ø‡µÇ\n‡¥ï‡µç‡¥Ø‡¥æ‡¥Æ‡¥± ‡¥§‡µÅ‡¥±‡¥ï‡µç‡¥ï‡µÅ‡¥ï ‡¥Ö‡¥≤‡µç‡¥≤‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡µΩ ‡¥ö‡¥ø‡¥§‡µç‡¥∞‡¥Ç ‡¥Ö‡¥™‡µç‚Äå‡¥≤‡µã‡¥°‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï",hint:"‡¥µ‡¥ø‡¥≥‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥Ü‡¥∞‡µã‡¥ó‡µç‡¥Ø‡¥Ç ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡¥æ‡µª ‡¥ï‡µç‡¥Ø‡¥æ‡¥Æ‡¥± ‡¥Ö‡¥≤‡µç‡¥≤‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡µΩ ‡¥ö‡¥ø‡¥§‡µç‡¥∞‡¥Ç ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï.",prediction:"‡¥™‡µç‡¥∞‡¥µ‡¥ö‡¥®‡¥Ç",more:"‡¥ï‡µÇ‡¥ü‡µÅ‡¥§‡µΩ ‡¥µ‡¥ø‡¥µ‡¥∞‡¥ô‡µç‡¥ô‡µæ",buy:"‡¥â‡µΩ‡¥™‡µç‡¥™‡¥®‡µç‡¥®‡¥ô‡µç‡¥ô‡µæ ‡¥µ‡¥æ‡¥ô‡µç‡¥ô‡µÅ‡¥ï",statusWait:"‡¥®‡¥ø‡¥≤: ‡¥Æ‡µã‡¥°‡µΩ ‡¥ï‡¥æ‡¥§‡µç‡¥§‡¥ø‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ",statusCamera:"‡¥®‡¥ø‡¥≤: ‡¥ï‡µç‡¥Ø‡¥æ‡¥Æ‡¥± ‡¥§‡µÅ‡¥±‡¥®‡µç‡¥®‡¥ø‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ",statusImage:"‡¥®‡¥ø‡¥≤: ‡¥ö‡¥ø‡¥§‡µç‡¥∞‡¥Ç ‡¥≤‡µã‡¥°‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥§‡µÅ",statusDetect:"‡¥®‡¥ø‡¥≤: ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡µΩ ‡¥™‡µÇ‡µº‡¥§‡µç‡¥§‡¥ø‡¥Ø‡¥æ‡¥Ø‡¥ø ‚úÖ"}
};

const classTranslations = {
"Healthy Leaf": { en:"Healthy Leaf", hi:"‡§∏‡•ç‡§µ‡§∏‡•ç‡§• ‡§™‡§§‡•ç‡§§‡§æ", bn:"‡¶∏‡ßÅ‡¶∏‡ßç‡¶• ‡¶™‡¶æ‡¶§‡¶æ", ta:"‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æá‡Æ≤‡Øà", te:"‡∞Ü‡∞∞‡±ã‡∞ó‡±ç‡∞Ø‡∞ï‡∞∞‡∞Æ‡±à‡∞® ‡∞Ü‡∞ï‡±Å", mr:"‡§®‡§ø‡§∞‡•ã‡§ó‡•Ä ‡§™‡§æ‡§®", gu:"‡™∏‡´ç‡™µ‡™∏‡´ç‡™• ‡™™‡™æ‡™®", kn:"‡≤Ü‡≤∞‡≥ã‡≤ó‡≥ç‡≤Ø‡≤ï‡≤∞ ‡≤é‡≤≤‡≥Ü", ml:"‡¥Ü‡¥∞‡µã‡¥ó‡µç‡¥Ø‡¥ï‡¥∞‡¥Æ‡¥æ‡¥Ø ‡¥á‡¥≤" },
"Powdery Mildew": { en:"Powdery Mildew", hi:"‡§™‡§æ‡§â‡§°‡§∞‡•Ä ‡§Æ‡§ø‡§≤‡•ç‡§°‡•ç‡§Ø‡•Ç", bn:"‡¶™‡¶æ‡¶â‡¶°‡¶æ‡¶∞‡¶ø ‡¶Æ‡¶ø‡¶≤‡¶°‡¶ø‡¶â", ta:"‡Æ™‡Æµ‡ØÅ‡Æü‡Æ∞‡Æø ‡ÆÆ‡Æø‡Æ≤‡Øç‡Æü‡Æø‡ÆØ‡ØÇ", te:"‡∞™‡±å‡∞°‡∞∞‡±Ä ‡∞Æ‡∞ø‡∞≤‡±ç‡∞°‡±ç‡∞Ø‡±Ç", mr:"‡§™‡§æ‡§µ‡§°‡§∞‡•Ä ‡§Æ‡§ø‡§≤‡•ç‡§°‡•ç‡§Ø‡•Ç", gu:"‡™™‡™æ‡™µ‡™°‡™∞‡´Ä ‡™Æ‡™ø‡™≤‡´ç‡™°‡´ç‡™Ø‡´Ç", kn:"‡≤™‡≥å‡≤°‡≤∞‡≤ø ‡≤Æ‡≤ø‡≤≤‡≥ç‡≤°‡≥ç‡≤Ø‡≥Ç", ml:"‡¥™‡µó‡¥°‡¥±‡¥ø ‡¥Æ‡¥ø‡µΩ‡¥°‡µç‡¥Ø‡µÇ" },
"Bacterial Spot": { en:"Bacterial Spot", hi:"‡§¨‡•à‡§ï‡•ç‡§ü‡•Ä‡§∞‡§ø‡§Ø‡§≤ ‡§∏‡•ç‡§™‡•â‡§ü", bn:"‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶¶‡¶æ‡¶ó", ta:"‡Æ™‡Ææ‡Æï‡Øç‡Æü‡ØÄ‡Æ∞‡Æø‡ÆØ‡Ææ ‡Æ§‡Æ¥‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ", te:"‡∞¨‡∞æ‡∞ï‡±ç‡∞ü‡±Ä‡∞∞‡∞ø‡∞Ø‡∞æ ‡∞Æ‡∞ö‡±ç‡∞ö", mr:"‡§¨‡•Ö‡§ï‡•ç‡§ü‡•á‡§∞‡§ø‡§Ø‡§≤ ‡§∏‡•ç‡§™‡•â‡§ü", gu:"‡™¨‡´á‡™ï‡´ç‡™ü‡´á‡™∞‡™ø‡™Ø‡™≤ ‡™∏‡´ç‡™™‡´ã‡™ü", kn:"‡≤¨‡≥ç‡≤Ø‡≤æ‡≤ï‡≥ç‡≤ü‡≥Ä‡≤∞‡≤ø‡≤Ø‡≤≤‡≥ç ‡≤ï‡≤≤‡≥Ü", ml:"‡¥¨‡¥æ‡¥ï‡µç‡¥ü‡µÄ‡¥∞‡¥ø‡¥Ø‡µΩ ‡¥™‡¥æ‡¥ü‡µç" }
};

let currentLang='en';
const langSelect=document.getElementById('langSelect');
function updateTexts(){
  const t=texts[currentLang];
  document.getElementById('title').innerText=t.title;
  document.getElementById('uploadText').innerText=t.upload;
  document.getElementById('btn-open').innerText=t.open;
  document.getElementById('btn-detect').innerText=t.detect;
  document.getElementById('placeholder').innerText=t.placeholder;
  document.getElementById('hintText').innerText=t.hint;
  document.getElementById('predictionLabel').innerText=t.prediction;
  document.getElementById('btn-more').innerText=t.more;
  document.getElementById('btn-buy').innerText=t.buy;
  document.getElementById('statusText').innerText=t.statusWait;
}
langSelect.addEventListener('change',()=>{currentLang=langSelect.value;updateTexts();});
updateTexts();

const MODEL_URL="https://teachablemachine.withgoogle.com/models/Bs-ykiSE3/";
let model,webcamStream=null;
const webcamEl=document.getElementById('webcam');
const imgPreview=document.getElementById('imgPreview');
const btnDetect=document.getElementById('btn-detect');
const predictionText=document.getElementById('predictionText');
const predictionProb=document.getElementById('predictionProb');
const modelStatus=document.getElementById('model-status');
const statusTextEl=document.getElementById('statusText');

async function initModel(){
  try{
    const modelURLFull=MODEL_URL+"model.json";
    const metadataURL=MODEL_URL+"metadata.json";
    model=await tmImage.load(modelURLFull,metadataURL);
    modelStatus.innerText="‚úÖ Model loaded successfully!";
    btnDetect.disabled=false;
    statusTextEl.innerText=texts[currentLang].statusWait;
  }catch(e){
    modelStatus.innerText="‚ùå Failed to load model.";
    statusTextEl.innerText=texts[currentLang].hint;
    console.error(e);
  }
}
initModel();

document.getElementById('btn-open').addEventListener('click',async()=>{
  try{
    const stream=await navigator.mediaDevices.getUserMedia({video:true});
    webcamStream=stream;
    webcamEl.srcObject=stream;
    webcamEl.style.display='block';
    imgPreview.style.display='none';
    document.getElementById('placeholder').style.display='none';
    statusTextEl.innerText=texts[currentLang].statusCamera;
  }catch(e){
    alert('Cannot access camera');
    console.error(e);
  }
});

document.getElementById('file').addEventListener('change',()=>{
  const file=document.getElementById('file').files[0];
  if(!file)return;
  if(webcamStream){webcamStream.getTracks().forEach(t=>t.stop());webcamStream=null;}
  const url=URL.createObjectURL(file);
  imgPreview.src=url;
  imgPreview.style.display='block';
  webcamEl.style.display='none';
  document.getElementById('placeholder').style.display='none';
  imgPreview.onload=()=>URL.revokeObjectURL(url);
  statusTextEl.innerText=texts[currentLang].statusImage;
});

btnDetect.addEventListener('click',async()=>{
  if(!model){alert('Model not loaded yet!');return;}
  let prediction;
  if(imgPreview.style.display==='block'){prediction=await model.predict(imgPreview);}
  else if(webcamEl.style.display==='block'){prediction=await model.predict(webcamEl);}
  else{alert('Open camera or upload an image first!');return;}

  prediction.sort((a,b)=>b.probability-a.probability);
  const best=prediction[0];
  const translated=classTranslations[best.className];
  predictionText.innerText=translated?translated[currentLang]:best.className;
  predictionProb.innerText=(best.probability*100).toFixed(2)+"%";
  statusTextEl.innerText=texts[currentLang].statusDetect;
});

document.getElementById('btn-more').onclick=()=>{
  const p=predictionText.innerText;
  if(!p||p==="‚Äî")return alert('No prediction available.');
  window.open('https://acis-naitikanand.glide.page/?d='+encodeURIComponent(p),'_blank');
};
document.getElementById('btn-buy').onclick=()=>{window.open('https://acis-naitikanand.glide.page','_blank');};
window.addEventListener('beforeunload',()=>{if(webcamStream)webcamStream.getTracks().forEach(t=>t.stop());});
</script>
</body>
</html>


